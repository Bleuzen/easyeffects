{
    "name": "easyeffects-modules",
    "modules": [
        {
            "name": "libsigc++",
            "buildsystem": "meson",
            "config-opts": [
                "-Dbuild-examples=false"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/libsigc++/3.2/libsigc++-3.2.0.tar.xz",
                    "sha256": "8cdcb986e3f0a7c5b4474aa3c833d676e62469509f4899110ddf118f04082651",
                    "x-checker-data": {
                        "type": "gnome",
                        "name": "libsigc++",
                        "stable-only": true
                    }
                }
            ],
            "cleanup": [
                "/lib/sigc++*"
            ]
        },
        {
            "name": "libebur128",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DCMAKE_BUILD_TYPE=Release",
                "-DBUILD_STATIC_LIBS=OFF",
                "-DCMAKE_INSTALL_LIBDIR=lib"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/jiixyj/libebur128.git",
                    "tag": "v1.2.6",
                    "commit": "67b33abe1558160ed76ada1322329b0e9e058b02",
                    "x-checker-data": {
                        "type": "git",
                        "tag-pattern": "^v([\\d.]+)"
                    }
                }
            ],
            "post-install": [
                "install -Dm644 -t $FLATPAK_DEST/share/licenses/libebur128 COPYING"
            ]
        },
        {
            "name": "zita-convolver",
            "no-autogen": true,
            "subdir": "source",
            "make-install-args": [
                "PREFIX=${FLATPAK_DEST}",
                "LIBDIR=${FLATPAK_DEST}/lib"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://kokkinizita.linuxaudio.org/linuxaudio/downloads/zita-convolver-4.0.3.tar.bz2",
                    "sha512": "62d7841757f10c094e43ed755e187f947c5743f302ed2a1ee6064a850c18921466f4505d8a2a7b3ad23619db7f1ad7307e1dfb2e8a1e7685e60ece2ffff4f6ca"
                },
                {
                    "type": "patch",
                    "path": "patch/zita-convolver/0001-Fix-makefile.patch"
                }
            ],
            "modules": [
                "shared-modules/linux-audio/fftw3f.json",
                "shared-modules/linux-audio/lv2.json",
                "shared-modules/linux-audio/lilv.json",
                {
                    "name": "bs2b",
                    "rm-configure": true,
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://downloads.sourceforge.net/sourceforge/bs2b/libbs2b-3.1.0.tar.gz",
                            "sha256": "6aaafd81aae3898ee40148dd1349aab348db9bfae9767d0e66e0b07ddd4b2528"
                        },
                        {
                            "type": "script",
                            "dest-filename": "autogen.sh",
                            "commands": [
                                "cp -p /usr/share/automake-*/config.{sub,guess} build-aux",
                                "autoreconf -vfi"
                            ]
                        },
                        {
                            "type": "patch",
                            "path": "patch/bs2b/001-fix-automake-dist-lzma.patch"
                        }
                    ],
                    "post-install": [
                        "install -Dm644 -t $FLATPAK_DEST/share/licenses/bs2b COPYING"
                    ],
                    "cleanup": [
                        "/bin"
                    ]
                },
                {
                    "name": "speexdsp",
                    "buildsystem": "autotools",
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://gitlab.xiph.org/xiph/speexdsp",
                            "tag": "SpeexDSP-1.2.1",
                            "commit": "1b28a0f61bc31162979e1f26f3981fc3637095c8",
                            "x-checker-data": {
                                "type": "git",
                                "tag-pattern": "^SpeexDSP-([\\d.]+)"
                            }
                        }
                    ]
                },
                {
                    "name": "rubberband",
                    "buildsystem": "meson",
                    "cleanup": [
                        "/include",
                        "/lib/*.a",
                        "/lib/pkgconfig"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://breakfastquay.com/files/releases/rubberband-3.1.1.tar.bz2",
                            "sha256": "a442551fe7d26fb4a54dd1c34178733dc9c76ac9ce051a02325f5cb35d154381",
                            "x-checker-data": {
                                "type": "html",
                                "url": "https://www.breakfastquay.com/rubberband/",
                                "version-pattern": "Rubber Band Library v(\\d\\.\\d+\\.?\\d*) source",
                                "url-template": "https://breakfastquay.com/files/releases/rubberband-$version.tar.bz2"
                            }
                        }
                    ]
                },
                {
                    "name": "calf",
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/calf-studio-gear/calf.git",
                            "tag": "0.90.3",
                            "commit": "41a2b7fb029cf0099fc05b7a9c569208034018de",
                            "x-checker-data": {
                                "type": "git",
                                "tag-pattern": "^([\\d.]+)"
                            }
                        }
                    ],
                    "post-install": [
                        "install -Dm644 -t $FLATPAK_DEST/share/licenses/calf COPYING"
                    ],
                    "cleanup": [
                        "/bin",
                        "/share/applications",
                        "/share/bash-completion",
                        "/share/calf",
                        "/share/doc",
                        "/share/icons",
                        "/share/man"
                    ],
                    "modules": [
                        "shared-modules/linux-audio/fluidsynth2.json"
                    ]
                }
            ]
        },
        {
            "name": "rnnoise",
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/xiph/rnnoise.git",
                    "commit": "1cbdbcf1283499bbb2230a6b0f126eb9b236defd"
                }
            ],
            "cleanup": [
                "/share/doc/rnnoise"
            ]
        },
        {
            "name": "pipewire",
            "buildsystem": "meson",
            "config-opts": [
                "-Dgstreamer=disabled",
                "-Dman=disabled",
                "-Dsystemd=disabled",
                "-Dudev=disabled",
                "-Dudevrulesdir=disabled",
                "-Dsession-managers=[]"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/pipewire/pipewire.git",
                    "tag": "0.3.41",
                    "commit": "717fb64e4e4477b5a3bfb2d6f8def273b52b7259"
                }
            ]
        },
        {
            "name": "nlohmann-json",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DCMAKE_BUILD_TYPE=Release",
                "-DJSON_BuildTests=false"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/nlohmann/json",
                    "tag": "v3.11.2",
                    "commit": "bc889afb4c5bf1c0d8ee29ef35eaaf4c8bef8a5d",
                    "x-checker-data": {
                        "type": "git",
                        "tag-pattern": "^v([\\d.]+)$"
                    }
                }
            ]
        },
        {
            "name": "tbb",
            "buildsystem": "cmake-ninja",
            "builddir": true,
            "config-opts": [
                "-DTBB_TEST=OFF"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/oneapi-src/oneTBB/archive/refs/tags/v2021.7.0.tar.gz",
                    "sha256": "2cae2a80cda7d45dc7c072e4295c675fff5ad8316691f26f40539f7e7e54c0cc",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 227581,
                        "stable-only": true,
                        "url-template": "https://github.com/oneapi-src/oneTBB/archive/refs/tags/v$version.tar.gz"
                    }
                }
            ]
        },
        {
            "name": "libportal",
            "buildsystem": "meson",
            "config-opts": [
                "-Ddocs=false",
                "-Dbackends=gtk4"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/flatpak/libportal.git",
                    "tag": "0.6",
                    "commit": "13df0b887a7eb7b0f9b14069561a41f62e813155",
                    "x-checker-data": {
                        "type": "json",
                        "url": "https://api.github.com/repos/flatpak/libportal/releases/latest",
                        "tag-query": ".tag_name",
                        "version-query": "$tag | sub(\"^jq-\"; \"\")",
                        "timestamp-query": ".published_at"
                    }
                }
            ]
        },
        {
            "name": "zenity",
            "buildsystem": "meson",
            "sources": [
                {
                    "type": "git",
                    "url": "https://gitlab.gnome.org/GNOME/zenity",
                    "tag": "3.41.0",
                    "commit": "d8857f446b602d5fb4a41fef3d8a63507a12b72c"
                }
            ]
        },
        {
            "name": "fmt",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DCMAKE_INSTALL_PREFIX=/app",
                "-DCMAKE_INSTALL_LIBDIR=/app/lib",
                "-DBUILD_SHARED_LIBS=ON",
                "-DFMT_TEST=Off"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/fmtlib/fmt/releases/download/8.0.1/fmt-8.0.1.zip",
                    "sha256": "a627a56eab9554fc1e5dd9a623d0768583b3a383ff70a4312ba68f94c9d415bf"
                }
            ]
        },
        {
            "name": "gsl",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://ftp.gnu.org/gnu/gsl/gsl-2.7.1.tar.gz",
                    "sha256": "dcb0fbd43048832b757ff9942691a8dd70026d5da0ff85601e52687f6deeb34b",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 1267,
                        "stable-only": true,
                        "url-template": "https://ftp.gnu.org/gnu/gsl/gsl-$version.tar.gz"
                    }
                }
            ]
        },
        {
            "name": "libadwaita",
            "buildsystem": "meson",
            "config-opts": [
                "-Dintrospection=disabled",
                "-Dgtk_doc=false",
                "-Dtests=false",
                "-Dexamples=false",
                "-Dvapi=false"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://gitlab.gnome.org/GNOME/libadwaita.git",
                    "tag": "1.2.0",
                    "commit": "a905117bd2150de9e85d65f8cdce8d8fb001b89e"
                }
            ],
            "cleanup": [
                "/include",
                "/lib/pkgconfig"
            ],
            "modules": [
                {
                    "name": "pango",
                    "buildsystem": "meson",
                    "config-opts": [
                        "-Dtests=false",
                        "-Dbuild-documentation=false"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://gitlab.gnome.org/GNOME/pango.git",
                            "tag": "1.50.11",
                            "commit": "eabdbd54ee38fa658be574c4fa4574a05c755f16"
                        }
                    ],
                    "cleanup": [
                        "/include",
                        "/lib/debug"
                    ]
                },
                {
                    "name": "libsass",
                    "buildsystem": "meson",
                    "cleanup": [
                        "*"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/lazka/libsass.git",
                            "branch": "meson",
                            "commit": "302397c0c8ae2d7ab02f45ea461c2c3d768f248e"
                        }
                    ]
                },
                {
                    "name": "sassc",
                    "buildsystem": "meson",
                    "cleanup": [
                        "*"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/lazka/sassc.git",
                            "branch": "meson",
                            "commit": "82803377c33247265d779af034eceb5949e78354"
                        }
                    ]
                },
                {
                    "name": "meson",
                    "buildsystem": "simple",
                    "build-commands": [
                        "pip3 install --ignore-installed --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=/$FLATPAK_DEST \"meson\""
                    ],
                    "cleanup": [
                    	"*"
                    ],
                    "sources": [
                        {
                            "type": "file",
                            "url": "https://files.pythonhosted.org/packages/a2/b8/6a06ff0f13a00fc3c3e7d222a995526cbca26c1ad107691b6b1badbbabf1/wheel-0.38.4.tar.gz",
                            "sha256": "965f5259b566725405b05e7cf774052044b1ed30119b5d586b2703aafe8719ac"
                        },
                        {
                            "type": "file",
                            "url": "https://files.pythonhosted.org/packages/26/f4/ca5cb6df512f453ad50f78900bf7ec6a5491ee44bb49d0f6f76802dbdd43/setuptools-65.5.1.tar.gz",
                            "sha256": "e197a19aa8ec9722928f2206f8de752def0e4c9fc6953527360d1c36d94ddb2f"
                        },
                        {
                            "type": "file",
                            "url": "https://files.pythonhosted.org/packages/48/fb/09b5098772ce484b203be026d8047c596a28107e1ecc0df1412058d9f715/meson-0.60.3.tar.gz",
                            "sha256": "87ca5fa9358a01864529392bd64e027158eb94afca7c7766b1866ef27eccb98e"
                        }
                    ]
                },
                {
                    "name": "wayland",
                    "buildsystem": "meson",
                	"config-opts": [
                        "-Dtests=false",
                        "-Ddocumentation=false"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://gitlab.freedesktop.org/wayland/wayland",
                            "branch": "1.21.0",
                            "commit": "8135e856ebd79872f886466e9cee39affb7d9ee8"
                        }
                    ]
                },
                {
                    "name": "gtk",
                    "buildsystem": "meson",
                    "build-options": {
			"env": {
			    "PYTHONPATH": "/app/utils/lib/python3.9/site-packages:/app/lib/python3.9/site-packages:/usr/lib/python3.9/site-packages"
			}
		    },
                    "config-opts": [
                        "-Dintrospection=disabled",
                        "-Dgtk_doc=false",
                        "-Dbuild-tests=false",
                        "-Dbuild-examples=false"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://gitlab.gnome.org/GNOME/gtk.git",
                            "tag": "4.8.2",
                            "commit": "81b842636071fd757a99deddecd99222f08b4b0c"
                        }
                    ],
                    "cleanup": [
                        "/include",
                        "/lib/debug"
                    ]
                }
            ]
        }
    ]
}